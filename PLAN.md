# AI-Prompt-Guide Migration Plan

## Overview

Migrate from TypeScript MCP server (`AI-Prompt-Guide-MCP`) to a Python-based Claude Code extension.

**Key Changes:**
- Workflows → Skills (on-demand loading, saves context)
- Guides → Custom Agents (specialized reasoning)
- MCP tools → Native Claude Code tools (Task, TodoWrite, Read/Write/Edit)

---

## Project Structure

```
AI-Prompt-Guide/
├── .claude/
│   ├── skills/
│   │   ├── develop/SKILL.md
│   │   ├── develop-fix/SKILL.md
│   │   ├── develop-staged/SKILL.md
│   │   ├── develop-staged-tdd/SKILL.md
│   │   ├── decide/SKILL.md
│   │   ├── decide-lensed/SKILL.md
│   │   ├── brainstorm/SKILL.md
│   │   ├── brainstorm-refs/SKILL.md
│   │   ├── audit/SKILL.md
│   │   ├── coverage/SKILL.md
│   │   ├── plan/SKILL.md
│   │   ├── spec-feature/SKILL.md
│   │   └── spec-external/SKILL.md
│   ├── commands/
│   └── settings.local.json
├── agents/
│   ├── web-researcher.md      (Sonnet)
│   ├── document-cleanup.md    (Haiku)
│   ├── mid-level-developer.md (Sonnet)
│   └── senior-developer.md    (Opus)
├── plugin.json
├── CLAUDE.md
├── README.md
└── LICENSE
```

---

## Implementation Checklist

### Phase 1: Project Setup
- [x] Create `.claude/skills/` directory structure
- [x] Create `agents/` directory at root
- [x] Write `plugin.json` (extension manifest)
- [x] Write `CLAUDE.md` (project documentation)
- [x] Update `README.md` with usage instructions

### Phase 2: Agent Definitions (4 agents)
- [x] `agents/web-researcher.md` - Research, fact-checking, documentation lookup (Sonnet)
- [x] `agents/document-cleanup.md` - Doc splitting, index generation (Haiku)
- [x] `agents/mid-level-developer.md` - General development tasks (Sonnet)
- [x] `agents/senior-developer.md` - Architecture, complex debugging (Opus)

### Phase 3: Simple Skills (6 skills)
- [x] `plan/SKILL.md` - Structured planning workflow
- [x] `decide/SKILL.md` - Single-perspective decision making
- [x] `develop/SKILL.md` - Simple development with anti-patterns
- [x] `develop-fix/SKILL.md` - Bug fixing with root cause analysis
- [x] `spec-feature/SKILL.md` - Internal feature specification
- [x] `spec-external/SKILL.md` - External API specification

### Phase 4: Multi-Agent Skills (7 skills)
- [x] `develop-staged/SKILL.md` - Multi-agent staged development
- [x] `develop-staged-tdd/SKILL.md` - Multi-agent TDD development
- [x] `decide-lensed/SKILL.md` - Multi-perspective decision analysis
- [x] `brainstorm/SKILL.md` - Parallel ideation
- [x] `brainstorm-refs/SKILL.md` - Ideation with document references
- [x] `audit/SKILL.md` - Code audit with specialist agents
- [x] `coverage/SKILL.md` - Test coverage addition

### Phase 5: Testing & Validation
- [ ] Test each skill invocation (`/skill-name`)
- [ ] Test agent spawning via Task tool
- [ ] Test multi-agent orchestration workflows
- [ ] Verify plugin.json loads correctly in fresh project

---

## Key Adaptations

| MCP Concept | Claude Code Equivalent |
|-------------|------------------------|
| `coordinator_task` | `TodoWrite` for task tracking |
| `subagent_task` | `Task` tool to spawn agent |
| `start_subagent_task` | `Task` tool with agent reference |
| `complete_subagent_task` | Agent returns "Done" or "Blocked: [reason]" |
| `get_workflow` | Skill auto-loads via `/skill-name` |
| `get_guide` | Content embedded in agent definition |
| `view_document` | `Read` tool |
| `create_document` | `Write` tool |
| `section` (edit) | `Edit` tool |

---

## Skill Format Template

```markdown
---
name: skill-name
description: "Brief description of when to use this skill"
allowed-tools:
  - Bash
  - Read
  - Write
  - Edit
  - Glob
  - Grep
  - Task
  - TodoWrite
---

# Skill Title

## Usage
`/skill-name [arguments]`

**Arguments:** $ARGUMENTS

## Workflow Steps

[Adapted workflow content - replace MCP tools with native equivalents]
```

---

## Agent Format Template

```markdown
---
name: agent-name
description: "Use this agent when [trigger conditions].\n\n<example>\nContext: [scenario]\nuser: \"[request]\"\nassistant: \"[how to invoke]\"\n</example>"
model: sonnet|opus|haiku
color: green|purple|blue|cyan
---

[System prompt with methodology, operating principles, output format]
```

---

## Web Page Download Capability

Claude Code has `WebFetch` tool built-in:
1. Use `WebFetch` to download page content (auto-converts HTML to markdown)
2. Use `Write` tool to save to filesystem
3. Use `document-cleanup` agent to split/organize if needed

**Limitation:** WebFetch works best on static pages. JavaScript-heavy sites may have issues.

---

## Summary Index Design

Generated by `document-cleanup` agent after splitting documents:

```markdown
# Index: [Original Document Name]

Generated: [date]

| File | Keywords | Summary |
|------|----------|---------|
| auth-endpoints.md | login, logout, JWT, refresh | Authentication endpoints with JWT token handling |
| user-crud.md | create, update, delete, validation | User CRUD operations with input validation |
```

**Keywords captured:** Function names, class names, important constants, domain concepts, API endpoints

---

## Verification Steps

1. **Skill Test:** Run `/develop` in project, verify workflow loads
2. **Agent Test:** Use Task tool to spawn `mid-level-developer`, verify Sonnet model used
3. **Multi-Agent Test:** Run `/develop-staged`, verify it can orchestrate with Task tool
4. **Plugin Test:** Install in fresh directory, verify skills discoverable

---

## Reference Files

- `Claude-Code-Examples/.claude/skills/weather-skill/SKILL.md` - Skill format example
- `Claude-Code-Examples/agents/web-researcher.md` - Agent format example
- `AI-Prompt-Guide-MCP/.ai-prompt-guide/workflows/` - 13 workflow files to migrate
- `AI-Prompt-Guide-MCP/.ai-prompt-guide/guides/` - 4 guide files (content for agents)

---

## Notes

1. **Agents folder at root:** Required because `plugin.json` doesn't support agents yet
2. **No complex MCP tooling:** Document management, caching, etc. not needed - Claude Code handles natively
3. **Simpler is better:** Focus on skills + agents, avoid over-engineering
